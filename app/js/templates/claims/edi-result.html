<div>
    <input type="button" id="aDownloadEDI" class="downloadEDI btn btn-default btn-primary" title="Download Response XML" i18n="billing.fileInsurance.download"
        style="float: right;cursor: pointer;position:fixed;right:20px;z-index:1;" value="Download">
</div>
<ul class="nav tn-menu tn-menu-a" id="tabsEDIResponses" style="margin-bottom: 5px !important;position: fixed;width: 98%;">
    <li id="liErrorMessages" class="active" >
        <a id="aEDIErrorMsgs" href="#divErrorMsgs" data-toggle="tab" class="nav-link" i18n="billing.fileInsurance.warningMessages">
        </a>
    </li>
    <li id="liEDI">
        <a id="aEDIResp" href="#divEDIResult" data-toggle="tab" class="nav-link" i18n="billing.fileInsurance.EDIResponse"></a>
    </li>
</ul>
<div class="tab-content" style="margin-top: 50px;">
    <div id="divErrorMsgs" class="tab-pane" style="visibility: visible !important;">
        <div id="divEDIErrorMsgs">
            <% if(result){ %>

            <div id="divWarningMsg" >
                <table class="table table-bordered table-hover" style="width:100%;">
                    <tr>
                        <td style='width: 20px; padding-bottom: 0px;font-weight:bold;' i18n="billing.fileInsurance.SegmentID"></td>
                        <td style='width: 20px; padding-bottom: 0px;font-weight:bold;' i18n="billing.fileInsurance.SegmentName"></td>
                        <td style='width: 20px; padding-bottom: 0px;font-weight:bold;' i18n="billing.fileInsurance.Name"></td>
                        <td colspan='2' style='width: 100%;font-weight:bold;padding-bottom: 0px; border-right: none;' i18n="billing.fileInsurance.Message"></td>
                    </tr>
                    <% _.each(result,function(obj,index){ %>
                        <tr>
                            <td colspan='5'>
                                <span style='font-size: 15px;font-weight:bold;margin-left:500px;' i18n="billing.fileInsurance.claimNo">

                                </span>
                                <label style="margin-left: 10px;font-weight:bold;">
                                    <%= index %>
                                </label>
                            </td>
                        </tr>
                        <% _.each(obj,function(segment){ %>
                            <tr>
                                <td style='width: 20px; padding-bottom: 0px;'>
                                    <%=segment.segmentID || ''%>
                                </td>
                                <td style='width: 20px; padding-bottom: 0px;'>
                                    <%=segment.segmentName || ''%>
                                </td>
                                <td style='width: 20px; padding-bottom: 0px;'>
                                    <%=segment.fieldName || ''%>
                                </td>
                                <td colspan='2' style='width: 100%;padding-bottom: 0px; border-right: none;'>
                                    <%=segment.message || ''%>
                                </td>
                            </tr>
                        <%})%>
                    <%})%>
                <%}%>

                </table>
            </div>
        </div>
    </div>
    <div id="divEDIResult">
        <table id="tblEDIResp" class="table table-bordered">
            <% _.each(ediText,function(val,index){ %>
                <% if (val != '')  { %>
                    <% if (typeof val == 'object') { %>
                        <tr>
                            <td style='width: 20px; padding: 5px;'>
                                <%=index%>
                            </td>
                            <td style='width: 20px; padding: 5px;'>
                                    <% var fieldName = ""; %>
                                    <% _.each(val.v,function(v,index1){ %>
                                        <% if (fieldName == '') { %>
                                            <% fieldName +=(  (v.fieldName ? v.fieldName +'-' :'') + v.message )  %>
                                        <% }else {  %>
                                            <% fieldName +=('\n'+((v.fieldName ? v.fieldName +'-' :'') + v.message ))  %>
                                        <% }  %>
                                    <%})%>
                                <span class="popoverWarning" data-toggle="popover" data-placement="top"  title='<%=val.v[0].segmentName%>' data-content="<%=fieldName%>">
                                    <i class="icon-ic-warning" style="color:blue;"></i></span>
                                </div>
                            </td>
                            <td style='padding: 5px; border-right: none;'>
                                    <% if (index == 0) { %>
                                        <%=(val.e).replace(/ /g,'&nbsp;')%>
                                    <% } else{ %>
                                        <%=(val.e)%>
                                    <%}%>
                            </td>
                        </tr>
                        <% }else {  %>
                            <tr>
                                <td style='width: 20px; padding: 5px;'>
                                    <%=(index)%>
                                </td>
                                <td style='width: 20px; padding: 5px;'></td>
                                <td style='padding: 5px; border-right: none;'>
                                    <% if (index == 0) { %>
                                        <%=val.replace(/ /g, '&nbsp;')%>
                                    <% } else{ %>
                                        <%=(val)%>
                                    <%}%>
                                </td>
                            </tr>
                    <%} %>
                <%} %>
            <%}); %>
        </table>
    </div>
</div>
